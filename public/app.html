<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>QuickListing — Generator</title>
  <style>
    :root{--bg:#0b1220;--card:#111827;--muted:#94a3b8;--ink:#e5e7eb;--cta:#22d3ee;--ring:#1f2937;--shadow:0 12px 40px rgba(0,0,0,.35)}
    *{box-sizing:border-box}
    body{margin:0;background:linear-gradient(180deg,#0b1220,#0a1524 40%,#0b1220);color:var(--ink);font:15px/1.6 system-ui,Inter,Arial}
    a{color:var(--ink);text-decoration:none}
    a:hover{opacity:.9}

    .nav{position:sticky;top:0;z-index:40;background:rgba(11,18,32,.85);backdrop-filter:blur(10px);border-bottom:1px solid #132033}
    .nav-inner{max-width:1200px;margin:0 auto;display:flex;align-items:center;gap:12px;padding:12px 16px}
    .brand{display:flex;align-items:center;gap:10px;font-weight:700}
    .brand img{width:28px;height:28px;border-radius:8px;filter:saturate(.15) brightness(1.15)}
    .nav-spacer{margin-left:auto}
    .btn{background:var(--cta);color:#062e38;font-weight:700;border:0;border-radius:10px;padding:10px 16px;display:inline-block}
    .btn.secondary{background:#111827;color:#e5e7eb;border:1px solid #1f2937}

    .wrap{max-width:1200px;margin:0 auto;padding:36px 16px}
    h1{font-size:30px;margin:0 0 6px}
    p.sub{color:var(--muted);margin:0 0 18px}

    /* Bigger generator */
    #app{max-width:none;margin:24px auto 0; padding:0}
    .grid{display:grid;grid-template-columns:1.05fr .95fr;gap:18px}
    .card{background:var(--card);border:1px solid var(--ring);border-radius:16px;padding:18px;box-shadow:var(--shadow)}
    .row{display:flex;gap:8px;align-items:center}
    textarea,select{width:100%;background:#0b1220;color:var(--ink);border:1px solid #1f2937;border-radius:10px;padding:10px}
    textarea{min-height:190px;font-family:ui-monospace,Consolas,monospace}
    .pill{border:1px solid #1f2937;background:#0f172a;border-radius:10px;padding:6px 10px;font-weight:700}
    .out{white-space:pre-wrap;line-height:1.6}
    footer{color:#a7bed6;text-align:center;padding:28px 0;border-top:1px solid #122035;margin-top:28px}

    @media (max-width:980px){.grid{grid-template-columns:1fr}}
  </style>
</head>
<body>
  <!-- NAV (no extra “Try Free” button, no “Logo” text) -->
  <header class="nav">
    <div class="nav-inner">
      <a class="brand" href="/"><img src="/logo.svg" alt="logo"><span>QuickListing</span></a>
      <div class="nav-spacer"></div>
      <a href="/upgrade" class="btn secondary">Pricing</a>
    </div>
  </header>

  <main class="wrap">
    <div id="app">
      <div class="grid">
        <!-- LEFT: inputs -->
        <div class="card">
          <div class="row" style="justify-content:space-between">
            <span class="pill">Step 1</span>
            <button id="example" class="btn">Use Example</button>
          </div>

          <label style="display:block;margin-top:8px">Key features</label>
          <textarea id="features" placeholder="2 bed, 1 bath, renovated kitchen, in-unit laundry, balcony, hardwood floors, near subway"></textarea>

          <div class="row" style="margin-top:10px">
            <div style="flex:1">
              <label>Tone</label>
              <select id="tone">
                <option>Professional</option>
                <option>Luxury</option>
                <option>Family-Friendly</option>
                <option>Student/Value</option>
                <option>Investor</option>
              </select>
            </div>
            <div style="flex:1">
              <label>Length</label>
              <select id="length">
                <option value="short">Short (2–3 sentences)</option>
                <option value="medium">Medium (4–6 sentences)</option>
                <option value="long">Long (1 short paragraph)</option>
              </select>
            </div>
            <div style="flex:1">
              <label>Audience</label>
              <select id="aud">
                <option>Buyers</option>
                <option>Renters</option>
                <option>MLS</option>
              </select>
            </div>
          </div>

          <div class="row" style="margin-top:12px">
            <select id="plan" style="max-width:160px">
              <option value="free">Free</option>
              <option value="starter">Starter ($9)</option>
              <option value="plus">Plus ($25)</option>
            </select>
            <button id="gen" class="btn">Generate</button>
            <button id="clear" class="btn secondary">Clear</button>
          </div>
        </div>

        <!-- RIGHT: output -->
        <div class="card">
          <div class="row" style="justify-content:space-between">
            <span class="pill">Step 2</span>
            <div class="row">
              <button id="copyTitle" class="btn secondary">Copy Title</button>
              <button id="copyDesc" class="btn secondary">Copy Description</button>
            </div>
          </div>

          <h3 id="title" style="margin:10px 0 6px">(Title will appear here)</h3>
          <div id="desc" class="out muted">No description yet.</div>

          <div style="margin-top:12px">
            <div class="row">
              <span class="pill">Tone: <span id="toneTag">Professional</span></span>
              <span class="pill">Length: <span id="lenTag">Short (2–3 sentences)</span></span>
              <span class="pill">Audience: <span id="audTag">buyers</span></span>
            </div>
            <div id="bullets" class="out" style="margin-top:10px"></div>
          </div>
        </div>
      </div>
    </div>
  </main>

  <footer>© 2025 QuickListing • Built with ❤️ by Nikita</footer>

  <!-- Minimal client script to call your /generate -->
  <script>
    const el = s => document.querySelector(s);
    const features = el('#features'), tone = el('#tone'), lengthSel = el('#length'), aud = el('#aud');
    const plan = el('#plan'), gen = el('#gen'), clearBtn = el('#clear');
    const title = el('#title'), desc = el('#desc'), bullets = el('#bullets');
    const toneTag = el('#toneTag'), lenTag = el('#lenTag'), audTag = el('#audTag');

    el('#example').onclick = () => {
      features.value = "2 bed, 1 bath, renovated kitchen, in-unit laundry, balcony, hardwood floors, near subway";
    };
    clearBtn.onclick = () => { features.value=""; title.textContent="(Title will appear here)"; desc.textContent="No description yet."; bullets.textContent=""; };

    async function callGenerate(payload){
      const res = await fetch('/generate', {
        method:'POST',
        headers:{'Content-Type':'application/json'},
        body:JSON.stringify(payload)
      });
      if(!res.ok){ throw new Error('Request failed'); }
      return await res.json();
    }

    gen.onclick = async () => {
      desc.textContent = 'Generating…';
      toneTag.textContent = tone.value;
      lenTag.textContent = lengthSel.selectedOptions[0].text;
      audTag.textContent = aud.value.toLowerCase();
      try{
        const data = await callGenerate({
          features: features.value, tone: tone.value,
          length: lengthSel.value, audience: aud.value, plan: plan.value
        });
        title.textContent = data.meta?.title || 'Listing Title';
        desc.textContent = data.description || '(no description)';
        if (data.meta?.bullets?.length){
          bullets.innerHTML = "MLS-style bullets:\n" + data.meta.bullets.map(b => "• " + b).join("\n");
        } else { bullets.textContent = ""; }
      }catch(e){
        desc.textContent = '(Error)';
      }
    };

    el('#copyTitle').onclick = async () => { await navigator.clipboard.writeText(title.textContent); };
    el('#copyDesc').onclick = async () => { await navigator.clipboard.writeText(desc.textContent); };
  </script>
</body>
</html>
